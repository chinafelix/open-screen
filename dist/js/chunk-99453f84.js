(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99453f84"],{"21f5":function(e,t,s){},bd86:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s("85f2"),r=s.n(a);function i(e,t,s){return t in e?r()(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},c889:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 服务模块")])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"服务id"},model:{value:e.args.serviceId,callback:function(t){e.$set(e.args,"serviceId",t)},expression:"args.serviceId"}}),s("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"订单状态"},model:{value:e.args.status,callback:function(t){e.$set(e.args,"status",t)},expression:"args.status"}},e._l(e.status,(function(e){return s("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1),s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期"},model:{value:e.args.time,callback:function(t){e.$set(e.args,"time",t)},expression:"args.time"}}),s("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleSearch}},[e._v("搜索")]),s("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleReset}},[e._v("重置")])],1),s("el-table",{staticClass:"table",attrs:{data:e.data,border:""}},[s("el-table-column",{attrs:{prop:"id",label:"服务ID",width:"200"}}),s("el-table-column",{attrs:{prop:"memberId",label:"用户ID"}}),s("el-table-column",{attrs:{prop:"orderId",label:"订单ID"}}),s("el-table-column",{attrs:{prop:"serviceName",label:"服务名称"}}),s("el-table-column",{attrs:{prop:"finalBenas",label:"花费咖豆"}}),s("el-table-column",{attrs:{prop:"finalMoney",label:"花费金额"}}),s("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),s("el-table-column",{attrs:{prop:"serviceTime",label:"兑换时间",formatter:e.formatTime}}),s("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",formatter:e.formatStatus}}),s("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.serviceStatus?s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.handleViewItems(t.row,!1)}}},[e._v("确认服务")]):e._e(),1===t.row.serviceStatus||2===t.row.serviceStatus||3===t.row.serviceStatus?s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.handleViewItems(t.row,!0)}}},[e._v("完成服务")]):e._e(),4===t.row.serviceStatus?s("span",[e._v("已完成")]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"serviceNote",label:"备注",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{type:"textarea",resize:"none"},on:{blur:function(s){return e.handleNotes(t.row)},change:e.handleChangeNotes},model:{value:t.row.serviceNote,callback:function(s){e.$set(t.row,"serviceNote",s)},expression:"scope.row.serviceNote"}})]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.page.total,"page-size":e.args.pageSize},on:{"current-change":e.handlePager}})],1)],1),s("el-dialog",{attrs:{title:"商品清单",visible:e.ctrl.itemsVisible,width:"50%"},on:{"update:visible":function(t){return e.$set(e.ctrl,"itemsVisible",t)}}},[s("el-table",{staticClass:"table",attrs:{data:e.itemsData,border:""}},[s("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{attrs:{src:e.row.product.productIcon,"min-width":"50",height:"50"}})]}}])}),s("el-table-column",{attrs:{prop:"product.id",label:"ID",width:"200"}}),s("el-table-column",{attrs:{prop:"product.productName",label:"产品名称"}}),s("el-table-column",{attrs:{prop:"product.sendFee",label:"快递费"}}),s("el-table-column",{attrs:{prop:"product.integral",label:"所需积分"}}),s("el-table-column",{attrs:{prop:"product.money",label:"所需金额"}})],1)],1),s("el-dialog",{attrs:{title:"发货",visible:e.ctrl.sendVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.ctrl,"sendVisible",t)}}},[s("el-form",{ref:"sendform",attrs:{rules:e.rules,model:e.sendform,"label-width":"90px"}},[s("el-form-item",{attrs:{label:"订单",prop:"id"}},[s("el-input",{attrs:{disabled:"disabled"},model:{value:e.sendform.id,callback:function(t){e.$set(e.sendform,"id",t)},expression:"sendform.id"}})],1),e.ctrl.sendReal?s("el-form-item",{attrs:{label:"订单号",prop:"shipNo"}},[s("el-input",{model:{value:e.sendform.shipNo,callback:function(t){e.$set(e.sendform,"shipNo",t)},expression:"sendform.shipNo"}})],1):e._e(),e.ctrl.sendReal?s("el-form-item",{attrs:{label:"快递公司",prop:"shipCrop"}},[s("el-radio-group",{model:{value:e.sendform.shipCrop,callback:function(t){e.$set(e.sendform,"shipCrop",t)},expression:"sendform.shipCrop"}},e._l(e.ships,(function(t){return s("el-radio",{key:t.id,attrs:{label:t.cropName}},[e._v("\n                                "+e._s(t.cropName)+"\n                              ")])})),1)],1):e._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.ctrl.sendVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.handleSendSave}},[e._v("确 定")])],1)],1)],1)},r=[],i=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("ac6a"),s("456d"),s("a481"),s("bd86")),l=(s("d25f"),s("8f5d"));function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c={name:"userMallOrder",data:function(){return{url:{data:"/manage/orderService/list",status:"/manage/orderService/update",send:"/manager/user/mall/order/shipOrder",ships:"/manager/sys/ship/company/list"},status:[{id:"",value:"全部"},{id:0,value:"待服务"},{id:1,value:"服务中"},{id:2,value:"待退款"},{id:3,value:"联系异常"},{id:4,value:"服务完成"}],tableData:[],itemsData:[],ships:[],ctrl:{itemsVisible:!1,sendVisible:!1,sendReal:!0},page:{total:0},args:{status:"",time:"",serviceId:""},sendform:{id:"",shipNo:"",shipCrop:""},rules:{shipNo:[{required:!0,message:"不能为空",trigger:"blur"}],shipCrop:[{required:!0,message:"不能为空",trigger:"blur"}]},isFocus:!1}},created:function(){this.getData(!0)},computed:{data:function(){return this.tableData.filter((function(e){return e}))}},methods:{getData:function(e){var t=this;e&&(this.args.status="",this.args.time="",this.args.serviceId=""),this.args.time||(this.args.time="");var s={status:this.args.status,beginTime:this.args.time[0],endTime:this.args.time[1],serviceId:this.args.serviceId};this.$axios.get(l["a"]+this.url.data,{params:o({},s)}).then((function(e){t.tableData=e.data.rows||[],t.page.total=e.data.total||0}))},formatStatus:function(e){for(var t in this.status)if(this.status[t].id===e.serviceStatus)return this.status[t].value;return""},formatTime:function(e){return e.serviceTime?e.serviceTime.replace(/T/," ").substr(0,19):""},handlePager:function(e){this.args.pageIndex=e,this.getData(!1)},handleSend:function(e){e.items[0].product?(this.ctrl.sendVisible=!0,this.ctrl.sendReal=1==e.items[0].product.types,this.$exts.replaceObject(this.sendform,e)):this.$message.success("商品不存在，无法发货")},handleViewItems:function(e,t){var s,a=this;s=t?4:1,this.$axios.put(l["a"]+this.url.status,{id:e.id,status:s}).then((function(e){e.success&&(a.$message.success("服务修改成功"),a.getData(!1))}))},handleChangeNotes:function(){this.isFocus||(this.isFocus=!0)},handleNotes:function(e){var t=this;this.isFocus&&this.$axios.put(l["a"]+this.url.status,{id:e.id,serviceNote:e.serviceNote}).then((function(e){t.isFocus=!1,e.success&&(t.$message.success("备注成功！"),t.getData(!1))}))},handleSearch:function(){this.getData(!1)},handleReset:function(){this.getData(!0)},handleSendSave:function(){var e=this;this.$refs["sendform"].validate((function(t){return!!t&&(e.$axios.post(e.url.send,e.sendform).then((function(t){e.$message.success("已发货"),e.ctrl.sendVisible=!1,e.getData(!0)})),!0)}))},handleEnable:function(e,t){var s=this;this.$axios.post(this.url.update,{id:e,enable:t}).then((function(e){s.$message.success("设置成功"),s.getData(!1)}))}}},u=c,d=(s("e5ee"),s("2877")),p=Object(d["a"])(u,a,r,!1,null,"34befcf0",null);t["default"]=p.exports},e5ee:function(e,t,s){"use strict";var a=s("21f5"),r=s.n(a);r.a}}]);