(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b6bd6df"],{"23e6":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}));a("c5f6"),a("6b54"),a("87b3");function r(e,t,a){if(void 0==t||null==t)return a(new Error("输入不可以为空"));"0"==t.toString()&&a(),setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,r=e.test(t);r?a():a(new Error("请输入正整数"))}else a(new Error("请输入正整数"))}),0)}function l(e,t,a){if(void 0==t||null==t)return a(new Error("输入不可以为空"));"0"==t.toString()&&a(),setTimeout((function(){Number(t)?a():a(new Error("请输入数字货币"))}),100)}},"6e13":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 后台管理员")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",staticStyle:{float:"right"},attrs:{type:"primary",icon:"delete"},on:{click:e.handleAdd}},[e._v("添加")]),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.args.keyword,callback:function(t){e.$set(e.args,"keyword",t)},expression:"args.keyword"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),a("el-table",{staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"loginName",label:"登录名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),a("el-table-column",{attrs:{prop:"groups",label:"权限",formatter:e.formatGroup}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.row)}}}),a("el-tooltip",{attrs:{effect:"dark",content:"启用或禁用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:function(a){return e.handleEnable(t.row.id,t.row.enable)}},model:{value:t.row.enable,callback:function(a){e.$set(t.row,"enable",a)},expression:"scope.row.enable"}})],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.page.total,"page-size":e.args.pageSize},on:{"current-change":e.handlePager}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.ctrl.editVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.ctrl,"editVisible",t)}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"登录名",prop:"loginName"}},[a("el-input",{model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"loginPwd"}},[a("el-input",{model:{value:e.form.loginPwd,callback:function(t){e.$set(e.form,"loginPwd",t)},expression:"form.loginPwd"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"权限",prop:"groups"}},[a("el-checkbox-group",{model:{value:e.groupsSelect,callback:function(t){e.groupsSelect=t},expression:"groupsSelect"}},e._l(e.groupsDict,(function(t){return a("el-checkbox",{key:t.key,attrs:{label:t.key}},[e._v(e._s(t.text))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ctrl.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)},l=[],o=a("23e6"),n={name:"userSysUser",data:function(){return{url:{data:"/manager/sys/user/list",create:"/manager/sys/user/create",update:"/manager/sys/user/update",remove:"/manager/sys/user/remove"},tableData:[],args:{keyword:"",pageIndex:1,pageSize:20},page:{total:0},ctrl:{editVisible:!1,new:!1},form:{id:"",loginName:"",loginPwd:"",mobile:"",groups:0},groupsDict:[{key:4,text:"用户"},{key:2,text:"管理员"}],rules:{loginName:[{required:!0,message:"不能为空",trigger:"blur"}],mobile:[{required:!0,message:"不能为空",trigger:"blur"}],groups:[{required:!0,message:"不能为空",trigger:"blur"},{validator:o["b"],trigger:"blur"}]}}},computed:{groupsSelect:{get:function(){var e=[0],t=1,a=this.form.groups,r=Math.round(Math.pow(2,t));while(r<=a)(r&a)==r&&e.push(r),t++,r=Math.round(Math.pow(2,t));return e},set:function(e){var t=0;for(var a in e)t+=e[a];this.form.groups=t}}},created:function(){this.getData()},methods:{handlePager:function(e){this.args.pageIndex=e,this.getData(!1)},getData:function(e){var t=this;e&&(this.args.count=!0,this.args.pageIndex=1),this.$axios.post(this.url.data,this.args).then((function(a){t.tableData=a.data.list||[],e&&(t.page.total=a.data.total||0)}))},formatGroup:function(e,t){var a=1,r=Math.round(Math.pow(2,a)),l="";while(r<=e.groups){if((r&e.groups)==r)switch(r){case 2:l+=",管理员";break;case 4:l+=",用户";break;default:l+=",未知";break}a++,r=Math.round(Math.pow(2,a))}return l.substr(1)},handleSearch:function(){this.getData(!0)},handleEdit:function(e){this.$exts.replaceObject(this.form,e),this.ctrl.new=!1,this.ctrl.editVisible=!0},handleAdd:function(){this.$exts.clearObject(this.form),this.ctrl.new=!0,this.ctrl.editVisible=!0},handleDelete:function(e){var t=this;this.$confirm("确认删除？").then((function(){t.$axios.post(t.url.remove,{id:e.id}).then((function(e){t.$message.success("删除成功"),t.getData(!0)}))})).catch((function(){}))},handleEnable:function(e,t){var a=this;this.$axios.post(this.url.update,{id:e,enable:t}).then((function(e){a.$message.success("设置成功"),a.getData(!1)}))},handleSave:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.$axios.post(e.ctrl.new?e.url.create:e.url.update,e.form).then((function(t){e.$message.success(e.ctrl.new?"创建成功":"修改成功"),e.ctrl.editVisible=!1,e.getData(!0)}))}))}}},i=n,s=(a("81db"),a("2877")),c=Object(s["a"])(i,r,l,!1,null,"0e372fde",null);t["default"]=c.exports},"81db":function(e,t,a){"use strict";var r=a("ddab"),l=a.n(r);l.a},ddab:function(e,t,a){}}]);