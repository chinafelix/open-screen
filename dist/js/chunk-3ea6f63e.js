(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea6f63e"],{"05f9":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),i("a",{staticStyle:{color:"blue"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.handleView({id:"-1",regionName:"跳转功能编辑",regionParent:""},!1)}}},[e._v("跳转功能编辑")])]),e._l(e.nav,(function(t){return i("el-breadcrumb-item",{key:t.id,attrs:{label:t.id}},[i("a",{staticStyle:{color:"blue"},attrs:{href:"javascript:void(0)"},on:{click:function(i){return e.handleView(t,!1)}}},[e._v(e._s(t.regionName))])])}))],2)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",staticStyle:{float:"right"},attrs:{type:"primary",icon:"delete"},on:{click:e.handleAdd}},[e._v("添加")])],1),i("el-table",{staticClass:"table",attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"ID"}}),i("el-table-column",{attrs:{prop:"regionName",label:"功能序号"}}),i("el-table-column",{attrs:{prop:"regionParent",label:"功能名称"}}),i("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(i){return e.handleEdit(t.row,!0)}}}),i("el-button",{attrs:{type:"success",icon:"el-icon-tickets",circle:""},on:{click:function(i){return e.handleView(t.row,!0)}}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return e.handleDelete(t.row)}}})]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.page.total,"page-size":e.args.pageSize},on:{"current-change":e.handlePager}})],1)],1),i("el-dialog",{attrs:{title:"跳转类型",visible:e.ctrl.editVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.ctrl,"editVisible",t)}}},[i("el-form",{ref:"form",attrs:{rule:e.rules,model:e.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"功能分类"}},[i("el-select",{attrs:{placeholder:"请选择功能分类"},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},e._l(e.funcLists,(function(e){return i("el-option",{key:e.code,attrs:{value:e.code,label:e.desc}})})),1)],1),"union_vip"===e.form.typeId?i("el-form-item",{attrs:{label:"联合会员页的ID"}},[i("el-select",{attrs:{placeholder:"请选择页面"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.packages,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"mini_program"===e.form.typeId?i("el-form-item",{attrs:{label:"外部小程序ID"}},[i("el-select",{attrs:{placeholder:"请选择外部小程序"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.miniPrograms,(function(e){return i("el-option",{key:e,attrs:{value:e,label:e}})})),1),i("el-input",{directives:[{name:"mode",rawName:"v-mode",value:e.form.url,expression:"form.url"}],staticStyle:{"margin-top":"10px"},attrs:{placeholder:"请输入"}})],1):e._e(),"point_store_goods"===e.form.typeId?i("el-form-item",{attrs:{label:"咖豆商品"}},[i("el-select",{attrs:{placeholder:"请选择咖豆商品"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.miniPrograms,(function(e){return i("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):e._e(),"point_store_catagory"===e.form.typeId?i("el-form-item",{attrs:{label:"咖豆商城类目"}},[i("el-select",{attrs:{placeholder:"请选择咖豆商城类目"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.tags,(function(e){return i("el-option",{key:e.categoryId,attrs:{value:e.categoryId,label:e.categoryName}})})),1)],1):e._e(),"privilege_grow"===e.form.typeId?i("el-form-item",{attrs:{label:"会员权益"}},[i("el-select",{attrs:{placeholder:"请选择会员权益"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.members,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1):e._e(),"privilege_integral"===e.form.typeId?i("el-form-item",{attrs:{label:"咖豆好礼"}},[i("el-select",{attrs:{placeholder:"请选择咖豆好礼"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.priviles,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1):e._e(),"order"===e.form.typeId?i("el-form-item",{attrs:{label:"预售活动"}},[i("el-select",{attrs:{placeholder:"请选择咖豆好礼"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.actions,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"flow"===e.form.typeId?i("el-form-item",{attrs:{label:"领取好礼活动"}},[i("el-select",{attrs:{placeholder:"请选择领取好礼活动"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.gifts,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"reward"===e.form.typeId?i("el-form-item",{attrs:{label:"油耗活动"}},[i("el-select",{attrs:{placeholder:"请选择油耗活动"},model:{value:e.form.subId,callback:function(t){e.$set(e.form,"subId",t)},expression:"form.subId"}},e._l(e.oils,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),"h5"===e.form.typeId?i("el-form-item",{attrs:{label:"h5地址"}},[i("el-input",{directives:[{name:"mode",rawName:"v-mode",value:e.form.url,expression:"form.url"}],attrs:{placeholder:"请输入"}})],1):e._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.ctrl.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)},a=[],s=(i("1c01"),i("58b2"),i("8e6e"),i("f3e2"),i("d25f"),i("ac6a"),i("456d"),i("bd86"));i("23e6");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(i,!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={name:"sysRegion",data:function(){return{service:"",url:{data:"/manager/sys/region",create:"/manager/sys/region/create",update:"/manager/sys/region/update",remove:"/manager/sys/region/remove",funcList:"admin-member/ecarxclub/banner/types",union:"admin-member/vipMember/packageCollections",tags:"/admin/product/category",privileges:"admin-member/ecarxclub/privileges",oil:"activity/admin/activities"},tableData:[],ctrl:{editVisible:!1,new:!1},nav:[],page:{total:0},args:{parent:-1,pageIndex:1,pageSize:10,count:!0},funcLists:[],form:{typeId:"",url:"",subId:""},rules:[],packages:[],miniPrograms:[],tags:[],members:[],priviles:[],actions:[],gifts:[],oils:[]}},created:function(){var e=window.config&&window.config.x_env_api;this.service=e||"//api.xchanger.cn/",this.getData(!0),this.getFuncList(),this.getUnionPackages(),this.getTagList(),this.getPrivileList(),this.getMembersList(),this.getActivites("flow"),this.getActivites("order"),this.getOilsList()},methods:{getData:function(e){var t=this;e&&(this.args.count=!0,this.args.pageIndex=1),this.$axios.post(this.url.data,this.args).then((function(i){t.tableData=i.data.list||[],e&&(t.page.total=i.data.total||0)}))},handlePager:function(e){this.args.pageIndex=e,this.getData(!1)},handleView:function(e,t){if(this.args.parent=e.id,this.getData(!0),t)this.nav.push(e);else{var i=[];for(var r in this.nav){if(console.log(this.nav[r].regionParent),console.log(e.regionParent),this.nav[r].regionParent==e.id)break;i.push(this.nav[r])}this.nav=i}},handleSave:function(){var e=this;this.$axios.post(this.ctrl.new?this.url.create:this.url.update,this.form).then((function(t){e.$message.success(e.ctrl.new?"创建成功":"修改成功"),e.ctrl.editVisible=!1,e.getData(!0)}))},handleEdit:function(e){this.$exts.replaceObject(this.form,e),this.ctrl.new=!1,this.ctrl.editVisible=!0},handleAdd:function(){this.$exts.clearObject(this.form),this.form.regionParent=this.args.parent,this.ctrl.new=!0,this.ctrl.editVisible=!0},handleDelete:function(e){var t=this;this.$confirm("确认删除？").then((function(){t.$axios.post(t.url.remove,{id:e.id}).then((function(e){t.$message.success("删除成功"),t.getData(!0)}))})).catch((function(){}))},getFuncList:function(){var e=this;this.$axios.get("".concat(this.service).concat(this.url.funcList)).then((function(t){for(var i in e.funcLists=t.types,t.types)"mini_program"===t.types[i].code&&(e.miniPrograms=t.types[i].appid)}))},getUnionPackages:function(){var e=this,t={type:"union",status:"Y"};this.$axios.get("".concat(this.service).concat(this.url.union),{params:o({},t)}).then((function(t){e.packages=t.dataList}))},getTagList:function(){var e=this,t={};this.$axios.get(this.url.tags,{params:o({},t)}).then((function(t){e.tags=t.data.rows}))},getPrivileList:function(){var e=this,t={pageSize:1e3,privilegeType:"grow",effectiveStatus:"P,Y"};this.$axios.get(this.service+this.url.privileges,{params:o({},t)}).then((function(t){e.members=t.dataList||[]}))},getMembersList:function(){var e=this,t={pageSize:1e3,privilegeType:"integral",effectiveStatus:"P,Y"};this.$axios.get(this.service+this.url.privileges,{params:o({},t)}).then((function(t){e.priviles=t.dataList||[]}))},getOilsList:function(){var e=this,t={pageSize:1e3,type:"reward",status:1};this.$axios.get(this.service+this.url.oil,{params:o({},t)}).then((function(t){e.oils=t||[]}))},getActivites:function(e){var t=this,i={pageSize:1e3,type:e,status:1};this.$axios.get(this.service+this.url.oil,{params:o({},i)}).then((function(i){"flow"===e?t.gifts=i||[]:t.actions=i||[]}))}}},c=l,u=(i("9baa"),i("2877")),d=Object(u["a"])(c,r,a,!1,null,"285fdd23",null);t["default"]=d.exports},"23e6":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));i("c5f6"),i("6b54"),i("87b3");function r(e,t,i){if(void 0==t||null==t)return i(new Error("输入不可以为空"));"0"==t.toString()&&i(),setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,r=e.test(t);r?i():i(new Error("请输入正整数"))}else i(new Error("请输入正整数"))}),0)}function a(e,t,i){if(void 0==t||null==t)return i(new Error("输入不可以为空"));"0"==t.toString()&&i(),setTimeout((function(){Number(t)?i():i(new Error("请输入数字货币"))}),100)}},"8af5":function(e,t,i){},"9baa":function(e,t,i){"use strict";var r=i("8af5"),a=i.n(r);a.a},bd86:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i("85f2"),a=i.n(r);function s(e,t,i){return t in e?a()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}}}]);