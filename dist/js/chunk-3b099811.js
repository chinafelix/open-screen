(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b099811"],{"23e6":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return l}));r("c5f6"),r("6b54"),r("87b3");function a(e,t,r){if(void 0==t||null==t)return r(new Error("输入不可以为空"));"0"==t.toString()&&r(),setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,a=e.test(t);a?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))}),0)}function l(e,t,r){if(void 0==t||null==t)return r(new Error("输入不可以为空"));"0"==t.toString()&&r(),setTimeout((function(){Number(t)?r():r(new Error("请输入数字货币"))}),100)}},"7e0f":function(e,t,r){"use strict";var a=r("e49b"),l=r.n(a);l.a},cb60:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 用户")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.args.keyword,callback:function(t){e.$set(e.args,"keyword",t)},expression:"args.keyword"}}),r("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),r("el-table",{staticClass:"table",attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"200"}}),r("el-table-column",{attrs:{prop:"icon",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{attrs:{src:e.row.icon,"min-width":"70",height:"70"}})]}}])}),r("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),r("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),r("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}}),r("el-table-column",{attrs:{prop:"gender",label:"性别",formatter:e.formatGender}}),r("el-table-column",{attrs:{label:"查询",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{key:t.row.id+"integral",attrs:{to:{path:"User-Integral",query:{userId:t.row.id}}}},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("积分")])]),e._v("\n                     \n                    "),r("router-link",{key:t.row.id+"clock",attrs:{to:{path:"User-Integral-Clock",query:{userId:t.row.id}}}},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("打卡")])]),e._v("\n                      \n                    "),r("router-link",{key:t.row.id+"order",attrs:{to:{path:"User-Mall-Order",query:{userId:t.row.id}}}},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("订单")])]),e._v("\n                      \n                    "),r("router-link",{key:t.row.id+"coupon",attrs:{to:{path:"User-Coupon",query:{userId:t.row.id}}}},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("卡券")])])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(r){return e.handleEdit(t.row)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"启用或禁用",placement:"top"}},[r("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:function(r){return e.handleEnable(t.row.id,t.row.enable)}},model:{value:t.row.enable,callback:function(r){e.$set(t.row,"enable",r)},expression:"scope.row.enable"}})],1)]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.page.total,"page-size":e.args.pageSize},on:{"current-change":e.handlePager}})],1)],1),r("el-dialog",{attrs:{title:"编辑",visible:e.ctrl.editVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.ctrl,"editVisible",t)}}},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),r("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[r("el-input",{model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),r("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[r("el-input",{model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:e._cfg.upload.url,data:{group:"user-icon"},accept:e._cfg.upload.accept,"on-success":e.handleSuccessFile,"before-upload":e.handleBeforeFile}},[e.form.icon?r("img",{staticClass:"avatar",attrs:{src:e.form.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[r("el-option",{key:"1",attrs:{label:"男",value:"1"}}),r("el-option",{key:"0",attrs:{label:"女",value:"0"}})],1)],1),r("el-form-item",{attrs:{label:"身份证",prop:"idCardNo"}},[r("el-input",{model:{value:e.form.idCardNo,callback:function(t){e.$set(e.form,"idCardNo",t)},expression:"form.idCardNo"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.ctrl.editVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)},l=[],i=(r("23e6"),{name:"userList",data:function(){return{url:{data:"/manager/user",update:"/manager/user/update"},args:{keyword:"",pageIndex:1,pageSize:10,count:!0},tableData:[],page:{total:0},ctrl:{editVisible:!1},form:{id:"",mobile:"",icon:"",nickName:"",realName:"",birthday:"",gender:"",idCardNo:""},rules:{mobile:[{required:!0,message:"不能为空",trigger:"blur"}],nickName:[{required:!0,message:"不能为空",trigger:"blur"}],realName:[{required:!0,message:"不能为空",trigger:"blur"}],birthday:[{required:!0,message:"不能为空",trigger:"blur"}],gender:[{required:!0,message:"不能为空",trigger:"blur"}],idCardNo:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){this.getData()},computed:{birthday:{get:function(){return this.form.birthday},set:function(e){this.form.birthday=e.Format("yyyy-MM-dd")}},gender:{get:function(){return 1==this.form.gender?"男":"女"},set:function(e){this.form.gender=e}}},methods:{handlePager:function(e){this.args.pageIndex=e,this.getData(!1)},getData:function(e){var t=this;e&&(this.args.count=!0,this.args.pageIndex=1),this.$axios.post(this.url.data,this.args).then((function(r){t.tableData=r.data.list||[],e&&(t.page.total=r.data.total||0)}))},formatGender:function(e,t){return 1==e.gender?"男":"女"},handleSearch:function(){this.getData(!0)},handleEdit:function(e){this.$exts.replaceObject(this.form,e),this.ctrl.new=!1,this.ctrl.editVisible=!0},handleEnable:function(e,t){var r=this;this.$axios.post(this.url.update,{id:e,enable:t}).then((function(e){r.$message.success("设置成功"),r.getData(!1)}))},handleBeforeFile:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},handleSuccessFile:function(e,t){this.form.icon=e.data},handleSave:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.$axios.post(e.url.update,e.form).then((function(t){e.$message.success("修改成功"),e.ctrl.editVisible=!1,e.getData(!0)}))}))}}}),o=i,n=(r("7e0f"),r("2877")),s=Object(n["a"])(o,a,l,!1,null,"f65552a8",null);t["default"]=s.exports},e49b:function(e,t,r){}}]);